<div class="content pb_0">

    <div class="container">
        <div class="row admin-header">
            <div class="col-xl-8">
                <h2>
                    <i class="fas fa-tachometer-alt" aria-hidden="true"></i> {{'EmployeeDashboard'|translate}}
                </h2>
            </div>
            <div class="col-xl-8"></div>
        </div>
        <div class="row margin10" style="margin-bottom:30px;">
            <div class="col-md-5">
                <!-- employee form start -->
                <div class="card user-detail">
                    <div class="card-body">
                        <div class="mat_grid_list">
                            <form [formGroup]="EmpForm" (ngSubmit)="Save()" class="crud-form-input">
                                <mat-grid-list cols="1">
                                    <mat-grid-tile>
                                        <div class="text-inside">
                                            <div class="col-md-12">
                                                <div style="float:left">
                                                    <h4 class="card-title red-color">{{'Profile'|translate}}</h4>
                                                </div>
                                            </div>
                                            <mat-form-field>
                                                <input type="text" placeholder="First Name" matInput
                                                    formControlName="firstName" (blur)="onBlurMethod('firstName')"
                                                    [ngClass]="{ 'is-invalid': f.firstName.touched && f.firstName.errors }" />
                                                <mat-error *ngIf="f.firstName.touched && f.firstName.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="f.firstName.errors.required">
                                                        {{'FirstNameisrequired'|translate}}
                                                    </div>
                                                </mat-error>
                                                <a class="link-action inner-input" title="Edit"
                                                    (click)="onEdit('firstName')">
                                                    <i class="fa fa-edit red-color" aria-hidden="true"></i>
                                                </a>
                                            </mat-form-field>
                                        </div>
                                    </mat-grid-tile>
                                    <!--  <mat-grid-tile>
                                         <div class="text-inside">
                                             <mat-form-field>
                                             <mat-checkbox id="amateur" class="amateur" color="primary">Amateur</mat-checkbox>
                                         </mat-form-field>
                                         </div>
                                     </mat-grid-tile> -->
                                    <mat-grid-tile>
                                        <div class="text-inside">
                                            <mat-form-field>
                                                <input type="text" placeholder="Last Name" matInput
                                                    formControlName="lastName" (blur)="onBlurMethod('lastName')"
                                                    [ngClass]="{ 'is-invalid': f.lastName.touched && f.lastName.errors }" />
                                                <mat-error *ngIf="f.lastName.touched && f.lastName.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="f.lastName.errors.required">
                                                        {{'LastNameisrequired'|translate}}
                                                    </div>
                                                </mat-error>
                                                <a class="link-action inner-input" title="Edit"
                                                    (click)="onEdit('lastName')">
                                                    <i class="fa fa-edit red-color" aria-hidden="true"></i>
                                                </a>
                                            </mat-form-field>
                                        </div>
                                    </mat-grid-tile>
                                    <mat-grid-tile>
                                        <div class="text-inside">
                                            <mat-form-field>
                                                <input type="text" matInput formControlName="title" placeholder="Title"
                                                    [ngClass]="{ 'is-invalid': f.title.touched && f.title.errors }"
                                                    (blur)="onBlurMethod('title')" />
                                                <mat-error *ngIf="f.title.touched && f.title.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="f.title.errors.required">
                                                        {{'Titleisrequired'|translate}}</div>
                                                </mat-error>
                                                <a class="link-action inner-input" title="Edit"
                                                    (click)="onEdit('title')">
                                                    <i class="fa fa-edit red-color" aria-hidden="true"></i>
                                                </a>
                                            </mat-form-field>

                                        </div>
                                    </mat-grid-tile>
                                    <mat-grid-tile>
                                        <div class="text-inside">
                                            <mat-form-field>
                                                <input type="text" placeholder="Email"
                                                    pattern="[a-zA-Z0-9.-_]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}"
                                                    required matInput formControlName="email"
                                                    (blur)="onBlurMethod('email')"
                                                    [ngClass]="{ 'is-invalid': f.email.touched && f.email.errors }" />
                                                <mat-error *ngIf="f.email.touched && f.email.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="f.email.errors.required">
                                                        {{'EmailNameisrequired'|translate}}
                                                    </div>
                                                </mat-error>
                                                <a class="link-action inner-input" title="Edit"
                                                    (click)="onEdit('email')">
                                                    <i class="fa fa-edit red-color" aria-hidden="true"></i>
                                                </a>
                                            </mat-form-field>
                                        </div>
                                    </mat-grid-tile>

                                    <mat-grid-tile>
                                        <div class="text-inside">
                                            <mat-form-field>
                                                <mat-label>{{'ExSafetyEmail'|translate}}</mat-label>
                                                <input type="text" placeholder="EXsafety Email"
                                                    pattern="[a-zA-Z0-9.-_]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}"
                                                    required matInput formControlName="exSafetyEmail"
                                                    (blur)="onBlurMethod('exSafetyEmail')"
                                                    [ngClass]="{ 'is-invalid': f.email.touched && f.email.errors }" />
                                                <mat-error *ngIf="f.email.touched && f.email.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="f.email.errors.required">
                                                        {{'EmailNameisrequired'|translate}}
                                                    </div>
                                                </mat-error>
                                                <a class="link-action inner-input" title="Edit"
                                                    (click)="onEdit('exSafetyEmail')">
                                                    <i class="fa fa-edit red-color" aria-hidden="true"></i>
                                                </a>
                                            </mat-form-field>
                                        </div>
                                    </mat-grid-tile>

                                    <mat-grid-tile>
                                        <div class="text-inside">
                                            <mat-form-field>
                                                <input type="text" placeholder="Supervisorâ€™s Email"
                                                    (blur)="onBlurMethod('SupervisorEmail')" matInput
                                                    formControlName="supervisorEmail"
                                                    [ngClass]="{ 'is-invalid': f.supervisorEmail.touched && f.supervisorEmail.errors }" />
                                                <mat-error *ngIf="f.supervisorEmail.touched && f.supervisorEmail.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="f.supervisorEmail.errors.required">
                                                        {{'EmailNameisrequired'|translate}}
                                                    </div>
                                                </mat-error>
                                                <a class="link-action inner-input" title="Edit"
                                                    (click)="onEdit('SupervisorEmail')">
                                                    <i class="fa fa-edit red-color" aria-hidden="true"></i>
                                                </a>
                                            </mat-form-field>
                                        </div>
                                    </mat-grid-tile>
                                    <!-- departments -->
                                    <!-- (blur)="onBlurMethod('departments')" -->
                                    <mat-grid-tile>
                                        <div class="text-inside">
                                            <mat-form-field class="example-chip-list">
                                                <mat-chip-list #chipList aria-label="Department(s)"
                                                    [disabled]="disabled">
                                                    <mat-chip *ngFor="let fruit of fruits" [selectable]="selectable"
                                                        [removable]="removable" (removed)="remove(fruit)">
                                                        {{fruit}}
                                                        <mat-icon matChipRemove *ngIf="removable">{{'cancel'|translate}}
                                                        </mat-icon>
                                                    </mat-chip>
                                                    <input placeholder="Department(s)" #fruitInput [disabled]="disabled"
                                                        #autocompleteTrigger="matAutocompleteTrigger"
                                                        [formControl]="fruitCtrl" [matAutocomplete]="auto"
                                                        [matChipInputFor]="chipList"
                                                        [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                                        (matChipInputTokenEnd)="add($event)"
                                                        style="background-color: #f7f8f9 !important;">
                                                </mat-chip-list>
                                                <mat-autocomplete #auto="matAutocomplete"
                                                    (optionSelected)="selected($event)" autoActiveFirstOption>
                                                    <mat-option *ngFor="let fruit of filteredFruits | async"
                                                        [value]="fruit">
                                                        <mat-checkbox color="primary" style="padding: 0 12px;"
                                                            [checked]="fruits.indexOf(fruit) >= 0"></mat-checkbox>
                                                        {{fruit}}
                                                    </mat-option>
                                                </mat-autocomplete>
                                                <button mat-icon-button matSuffix style="width: 34px; height: 34px;"
                                                    (click)="openAuto(autocompleteTrigger)" [disabled]="formDisable">
                                                    <mat-icon style="width: 34px;">expand_more</mat-icon>
                                                </button>
                                                <a class="link-action inner-input" title="Edit"
                                                    (click)="onEdit('matchip')">
                                                    <i class="fa fa-edit red-color" aria-hidden="true"></i>
                                                </a>
                                            </mat-form-field>
                                        </div>
                                    </mat-grid-tile>


                                    <mat-grid-tile>
                                        <div class="text-inside angFormStyle">
                                            <mat-label>Safety Sensitive</mat-label>
                                            <mat-form-field>
                                                <select matNativeControl formControlName="safetySenstive"
                                                    (change)="onBlurMethod('safetySenstive')" required>
                                                    <option value="1">Yes</option>
                                                    <option value="0">No</option>
                                                </select>
                                                <a class="link-action inner-input" title="Edit"
                                                    (click)="onEdit('safetySenstive')">
                                                    <i class="fa fa-edit red-color" aria-hidden="true"></i>
                                                </a>
                                            </mat-form-field>
                                        </div>
                                    </mat-grid-tile>
                                    <!-- status -->
                                    <!-- saftey  -->
                                    <!-- <mat-grid-tile>
                                    <div class="text-inside">
                                        <mat-form-field>
                                          <mat-label>Employment Status</mat-label>
                                                <select matNativeControl required>
                                                  <option value="3">InActive</option>
                                                  <option value="1">Active</option>
                                                  <option value="2">InActive</option>

                                                </select>


                                            <a class="link-action inner-input" title="Edit"
                                                (click)="onEdit('status')">
                                                <i class="fa fa-edit red-color" aria-hidden="true"></i>
                                            </a>
                                        </mat-form-field>
                                    </div>
                                </mat-grid-tile> -->
                                    <!-- status -->


                                    <mat-grid-tile>
                                        <div class="text-inside">
                                            <mat-form-field>
                                                <input type="text" (blur)="onBlurMethod('phoneNumber')" max="10"
                                                    placeholder="Phone Number" matInput formControlName="phoneNumber"
                                                    [ngClass]="{ 'is-invalid': f.phoneNumber.touched && f.phoneNumber.errors }" />
                                                <mat-error *ngIf="f.phoneNumber.touched && f.phoneNumber.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="f.phoneNumber.errors.required">
                                                        {{'PhoneNumberisrequired'|translate}}</div>
                                                </mat-error>
                                                <a class="link-action inner-input" title="Edit"
                                                    (click)="onEdit('phoneNumber')">
                                                    <i class="fa fa-edit red-color" aria-hidden="true"></i>
                                                </a>
                                            </mat-form-field>
                                        </div>
                                    </mat-grid-tile>
                                    <mat-grid-tile>
                                        <div class="text-inside">
                                            <mat-form-field>
                                                <input type="text" (blur)="onBlurMethod('Street')" placeholder="Street"
                                                    matInput formControlName="street"
                                                    [ngClass]="{ 'is-invalid': f.street.touched && f.street.errors }" />
                                                <mat-error *ngIf="f.street.touched && f.street.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="f.street.errors.required">
                                                        {{'Streetisrequired'|translate}}</div>
                                                </mat-error>
                                                <a class="link-action inner-input" title="Edit"
                                                    (click)="onEdit('Street')">
                                                    <i class="fa fa-edit red-color" aria-hidden="true"></i>
                                                </a>
                                            </mat-form-field>
                                        </div>
                                    </mat-grid-tile>
                                    <mat-grid-tile>
                                        <div class="text-inside">
                                            <mat-form-field>
                                                <input type="text" (blur)="onBlurMethod('City')" placeholder="City"
                                                    matInput formControlName="city"
                                                    [ngClass]="{ 'is-invalid': f.city.touched && f.city.errors }" />
                                                <mat-error *ngIf="f.city.touched && f.city.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="f.city.errors.required"> {{'Cityisrequired'|translate}}
                                                    </div>
                                                </mat-error>
                                                <a class="link-action inner-input" title="Edit"
                                                    (click)="onEdit('City')">
                                                    <i class="fa fa-edit red-color" aria-hidden="true"></i>
                                                </a>
                                            </mat-form-field>
                                        </div>
                                    </mat-grid-tile>
                                    <mat-grid-tile>
                                        <div class="text-inside">
                                            <mat-form-field>
                                                <input type="text" (blur)="onBlurMethod('State')" placeholder="State"
                                                    matInput formControlName="state"
                                                    [ngClass]="{ 'is-invalid': f.state.touched && f.state.errors }" />
                                                <mat-error *ngIf="f.state.touched && f.state.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="f.state.errors.required">
                                                        {{'Stateisrequired'|translate}}</div>
                                                </mat-error>
                                                <a class="link-action inner-input" title="Edit"
                                                    (click)="onEdit('State')">
                                                    <i class="fa fa-edit red-color" aria-hidden="true"></i>
                                                </a>
                                            </mat-form-field>
                                        </div>
                                    </mat-grid-tile>
                                    <mat-grid-tile>
                                        <div class="text-inside">
                                            <mat-form-field>
                                                <input type="text" (blur)="onBlurMethod('ZipCode')"
                                                    placeholder="Zip Code" matInput formControlName="zipCode"
                                                    [ngClass]="{ 'is-invalid': f.zipCode.touched && f.zipCode.errors }" />
                                                <mat-error *ngIf="f.zipCode.touched && f.zipCode.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="f.zipCode.errors.required">
                                                        {{'Zipcodeisrequired'|translate}}
                                                    </div>
                                                </mat-error>
                                                <a class="link-action inner-input" title="Edit"
                                                    (click)="onEdit('ZipCode')">
                                                    <i class="fa fa-edit red-color" aria-hidden="true"></i>
                                                </a>
                                            </mat-form-field>
                                        </div>
                                    </mat-grid-tile>
                                </mat-grid-list>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- employee form start -->


                <!-- training plan start -->
                <div class="card training-plan">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-7">
                                <div style="float:left">
                                    <h4 class="card-title red-color">{{'TrainingPlan'|translate}}</h4>
                                </div>
                            </div>
                        </div>
                        <div class="row annual-plan">
                            <div class="col-md-12">
                                <mat-tree [dataSource]="treedataSource" [treeControl]="treeControl"
                                    class="example-tree">
                                    <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
                                        <table mat-table [dataSource]="treeTableDataSource" matSort>
                                            <!--- Note that these columns can be defined in any order.
                                            The actual rendered columns are set as a property on the row definition" -->
                                            <!-- Name Column -->
                                            <ng-container matColumnDef="companyCourse">
                                                <th mat-header-cell *matHeaderCellDef> Courses</th>
                                                <td mat-cell *matCellDef="let element">{{element.companyCourse}} </td>
                                            </ng-container>
                                            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                                        </table>
                                    </mat-tree-node>
                                    <!-- This is the tree node template for expandable nodes -->
                                    <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
                                        <div class="mat-tree-node">
                                            <button mat-icon-button matTreeNodeToggle (click)="showNode(node)"
                                                [attr.aria-label]="'Toggle ' + node.name">
                                                <mat-icon class="mat-icon-rtl-mirror">
                                                    {{treeControl.isExpanded(node) ? 'maximize' : 'add'}}

                                                </mat-icon>
                                            </button>
                                            {{node.name}}
                                        </div>
                                        <!-- There is inline padding applied to this div using styles.
                                            This padding value depends on the mat-icon-button width.  -->
                                        <div [class.example-tree-invisible]="!treeControl.isExpanded(node)"
                                            role="group">
                                            <ng-container matTreeNodeOutlet></ng-container>
                                        </div>
                                    </mat-nested-tree-node>
                                </mat-tree>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- training plan stop -->

            </div>
            <div class="col-md-7">

                <!-- upcoming and history  start -->
                <div class="card upcoming-history mb_25">
                    <div class="card-body">
                        <mat-tab-group animationDuration="0ms">
                            <mat-tab label="Training">
                                <div class="table-responsive upcoming_his_table">
                                    <table mat-table [dataSource]="dataSource" matSort>
                                        <!-- Position Column -->
                                        <ng-container>
                                            <th mat-header-cell *matHeaderCellDef> </th>
                                            <td mat-cell *matCellDef="let element"> <a
                                                    (click)="redirect(element.credentialID)"><i
                                                        class="far fa-eye red-color"></i></a> </td>
                                        </ng-container>

                                        <!-- Name Column -->
                                        <ng-container matColumnDef="companyCourse">
                                            <th mat-header-cell *matHeaderCellDef>
                                                {{'Course'|translate}}
                                            </th>
                                            <td mat-cell *matCellDef="let element"><a
                                                    (click)="redirect(element.credentialID)"><i
                                                        class="far fa-eye red-color"></i></a><span
                                                    [ngClass]="checkColor(element.strDeuOverDueDate)?'upcoming-history2':checkColordue(element.strDeuOverDueDate)?'':'upcoming-history21'">{{element.companyCourse}}</span>
                                            </td>

                                        </ng-container>

                                        <!-- Weight Column -->
                                        <ng-container matColumnDef="nextDueDateOverride">
                                            <th mat-header-cell *matHeaderCellDef> {{'DueDate'|translate}} </th>
                                            <td mat-cell *matCellDef="let element"><span
                                                    [ngClass]="checkColor(element.strDeuOverDueDate)?'upcoming-history2':checkColordue(element.strDeuOverDueDate)?'':'upcoming-history21'">{{element.nextDueDateOverride
                                                    |
                                                    date: 'MM/dd/yyyy'}} </span> </td>
                                        </ng-container>

                                        <!-- Symbol Column -->
                                        <ng-container matColumnDef="strDeuOverDueDate">
                                            <th mat-header-cell *matHeaderCellDef> </th>
                                            <td mat-cell *matCellDef="let element"><i
                                                    class="far fa-info-circle red-color" aria-hidden="true"></i>
                                                <span
                                                    [ngClass]="checkColor(element.strDeuOverDueDate)?'upcoming-history2':checkColordue(element.strDeuOverDueDate)?'':'upcoming-history21'">
                                                    {{element.strDeuOverDueDate}}</span>
                                            </td>
                                        </ng-container>

                                        <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
                                        <tr mat-row
                                            [ngClass]="checkColor(row.strDeuOverDueDate)?'upcoming-history2':checkColordue(row.strDeuOverDueDate)?'':'upcoming-history21'"
                                            *matRowDef="let row; columns: columnsToDisplay;"></tr>
                                    </table>
                                    <mat-paginator [pageSize]="10" [pageSizeOptions]="[10, 25, 50,100]"
                                        showFirstLastButtons aria-label="Select page of periodic elements">
                                    </mat-paginator>
                                </div>
                            </mat-tab>
                            <!-- history -->
                            <mat-tab label="History">
                                <div class="table-responsive">
                                    <table mat-table #hBSort="matSort" [dataSource]="historyDataSource"
                                        style="width: 100%;" matSort>

                                        <!-- Weight Column -->
                                        <ng-container matColumnDef="course">
                                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="course_col_th">
                                                Course
                                                <mat-form-field class="filter" floatLabel="never"
                                                    (click)="$event.stopPropagation()">
                                                    <mat-label>{{'Search'|translate}}</mat-label>
                                                    <input matInput (keyup)="onChangeHistoryFilter($event)">
                                                </mat-form-field>
                                            </th>
                                            <td mat-cell *matCellDef="let element"> {{element.course}} </td>
                                        </ng-container>

                                        <!-- Name Column -->
                                        <ng-container matColumnDef="pass">
                                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Pass </th>
                                            <td mat-cell *matCellDef="let element">{{element.pass }} </td>
                                        </ng-container>

                                        <ng-container matColumnDef="score">
                                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Score</th>
                                            <td mat-cell *matCellDef="let element">
                                                {{element.score }}
                                            </td>
                                        </ng-container>
                                        <!-- Name Column -->
                                        <ng-container matColumnDef="date">
                                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Date </th>
                                            <td mat-cell *matCellDef="let element"> {{element.date|
                                                date: 'MM/dd/yyyy'}} </td>
                                        </ng-container>
                                        <tr mat-header-row *matHeaderRowDef="columnsToDisplayFoHistory"></tr>
                                        <tr mat-row *matRowDef="let row; columns: columnsToDisplayFoHistory;"></tr>
                                    </table>

                                    <mat-paginator #MatPaginator3 [pageSize]="10" [pageSizeOptions]="paginationArray"
                                        showFirstLastButtons>
                                    </mat-paginator>
                                </div>
                                <!-- <ag-grid-angular style=" height: 500px;" class="ag-theme-alpine"
                                    [pagination]="pagination" [paginationPageSize]="paginationPageSize"
                                    [rowData]="rowData" [columnDefs]="columnDefs">
                                </ag-grid-angular> -->
                            </mat-tab>
                        </mat-tab-group>

                    </div>
                </div>
                <!-- upcoming and history  stop -->
                <app-user-credentials #userCredentials [currentUserId]="userInfo.userId"
                    [languagePreference]="languagePreference" [activeCustomCourses]="activeCustomCourses">
                </app-user-credentials>

            </div>
        </div>
    </div>
</div>
